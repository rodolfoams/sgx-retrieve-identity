version: 2
jobs:
  build:
    docker:
      - image: sebvaucher/sgx-base:sgx_2.5

    working_directory: ~/

    steps:
      - checkout
      - run: cp -r /opt/intel/sgxsdk/SampleCode/SampleEnclave .
      - run: cp Makefile SampleEnclave/
      - run: cd SampleEnclave && make mrenclave
workflows:
  version: 2
  run:
    jobs:
      - build